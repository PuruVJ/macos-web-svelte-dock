{
  "version": 3,
  "sources": ["../../../../../node_modules/.pnpm/svelte@5.0.0-next.244/node_modules/svelte/src/store/index-client.js"],
  "sourcesContent": ["/** @import { Readable, Writable } from './public.js' */\nimport { noop } from '../internal/shared/utils.js';\nimport {\n\teffect_root,\n\teffect_tracking,\n\trender_effect\n} from '../internal/client/reactivity/effects.js';\nimport { source } from '../internal/client/reactivity/sources.js';\nimport { get as get_source, tick } from '../internal/client/runtime.js';\nimport { increment } from '../reactivity/utils.js';\nimport { get, writable } from './shared/index.js';\n\nexport { derived, get, readable, readonly, writable } from './shared/index.js';\n\n/**\n * @template V\n * @overload\n * @param {() => V} get\n * @param {(v: V) => void} set\n * @returns {Writable<V>}\n */\n/**\n * @template V\n * @overload\n * @param {() => V} get\n * @returns {Readable<V>}\n */\n/**\n * Create a store from a function that returns state, and (to make a writable store), an\n * optional second function that sets state.\n *\n * ```ts\n * import { toStore } from 'svelte/store';\n *\n * let count = $state(0);\n *\n * const store = toStore(() => count, (v) => (count = v));\n * ```\n * @template V\n * @param {() => V} get\n * @param {(v: V) => void} [set]\n * @returns {Writable<V> | Readable<V>}\n */\nexport function toStore(get, set) {\n\tconst store = writable(get(), (set) => {\n\t\tlet ran = false;\n\n\t\t// TODO do we need a different implementation on the server?\n\t\tconst teardown = effect_root(() => {\n\t\t\trender_effect(() => {\n\t\t\t\tconst value = get();\n\t\t\t\tif (ran) set(value);\n\t\t\t});\n\t\t});\n\n\t\tran = true;\n\n\t\treturn teardown;\n\t});\n\n\tif (set) {\n\t\treturn {\n\t\t\tset,\n\t\t\tupdate: (fn) => set(fn(get())),\n\t\t\tsubscribe: store.subscribe\n\t\t};\n\t}\n\n\treturn {\n\t\tsubscribe: store.subscribe\n\t};\n}\n\n/**\n * @template V\n * @overload\n * @param {Writable<V>} store\n * @returns {{ current: V }}\n */\n/**\n * @template V\n * @overload\n * @param {Readable<V>} store\n * @returns {{ readonly current: V }}\n */\n/**\n * Convert a store to an object with a reactive `current` property. If `store`\n * is a readable store, `current` will be a readonly property.\n *\n * ```ts\n * import { fromStore, get, writable } from 'svelte/store';\n *\n * const store = writable(0);\n *\n * const count = fromStore(store);\n *\n * count.current; // 0;\n * store.set(1);\n * count.current; // 1\n *\n * count.current += 1;\n * get(store); // 2\n * ```\n * @template V\n * @param {Writable<V> | Readable<V>} store\n */\nexport function fromStore(store) {\n\tlet value = /** @type {V} */ (undefined);\n\tlet version = source(0);\n\tlet subscribers = 0;\n\n\tlet unsubscribe = noop;\n\n\tfunction current() {\n\t\tif (effect_tracking()) {\n\t\t\tget_source(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tlet ran = false;\n\n\t\t\t\t\tunsubscribe = store.subscribe((v) => {\n\t\t\t\t\t\tvalue = v;\n\t\t\t\t\t\tif (ran) increment(version);\n\t\t\t\t\t});\n\n\t\t\t\t\tran = true;\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\ttick().then(() => {\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tunsubscribe();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}\n\n\t\treturn get(store);\n\t}\n\n\tif ('set' in store) {\n\t\treturn {\n\t\t\tget current() {\n\t\t\t\treturn current();\n\t\t\t},\n\t\t\tset current(v) {\n\t\t\t\tstore.set(v);\n\t\t\t}\n\t\t};\n\t}\n\n\treturn {\n\t\tget current() {\n\t\t\treturn current();\n\t\t}\n\t};\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AA2CO,SAAS,QAAQA,MAAK,KAAK;AACjC,QAAM,QAAQ,SAASA,KAAI,GAAG,CAACC,SAAQ;AACtC,QAAI,MAAM;AAGV,UAAM,WAAW,YAAY,MAAM;AAClC,oBAAc,MAAM;AACnB,cAAM,QAAQD,KAAI;AAClB,YAAI,IAAK,CAAAC,KAAI,KAAK;AAAA,MACnB,CAAC;AAAA,IACF,CAAC;AAED,UAAM;AAEN,WAAO;AAAA,EACR,CAAC;AAED,MAAI,KAAK;AACR,WAAO;AAAA,MACN;AAAA,MACA,QAAQ,CAAC,OAAO,IAAI,GAAGD,KAAI,CAAC,CAAC;AAAA,MAC7B,WAAW,MAAM;AAAA,IAClB;AAAA,EACD;AAEA,SAAO;AAAA,IACN,WAAW,MAAM;AAAA,EAClB;AACD;AAmCO,SAAS,UAAU,OAAO;AAChC,MAAI;AAAA;AAAA,IAA0B;AAAA;AAC9B,MAAI,UAAU,OAAO,CAAC;AACtB,MAAI,cAAc;AAElB,MAAI,cAAc;AAElB,WAAS,UAAU;AAClB,QAAI,gBAAgB,GAAG;AACtB,UAAW,OAAO;AAElB,oBAAc,MAAM;AACnB,YAAI,gBAAgB,GAAG;AACtB,cAAI,MAAM;AAEV,wBAAc,MAAM,UAAU,CAAC,MAAM;AACpC,oBAAQ;AACR,gBAAI,IAAK,WAAU,OAAO;AAAA,UAC3B,CAAC;AAED,gBAAM;AAAA,QACP;AAEA,uBAAe;AAEf,eAAO,MAAM;AACZ,yBAAe;AAEf,eAAK,EAAE,KAAK,MAAM;AACjB,gBAAI,gBAAgB,GAAG;AACtB,0BAAY;AAAA,YACb;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAED,aAAO;AAAA,IACR;AAEA,WAAOA,KAAI,KAAK;AAAA,EACjB;AAEA,MAAI,SAAS,OAAO;AACnB,WAAO;AAAA,MACN,IAAI,UAAU;AACb,eAAO,QAAQ;AAAA,MAChB;AAAA,MACA,IAAI,QAAQ,GAAG;AACd,cAAM,IAAI,CAAC;AAAA,MACZ;AAAA,IACD;AAAA,EACD;AAEA,SAAO;AAAA,IACN,IAAI,UAAU;AACb,aAAO,QAAQ;AAAA,IAChB;AAAA,EACD;AACD;",
  "names": ["get", "set"]
}
